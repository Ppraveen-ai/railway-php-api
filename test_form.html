<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test Complaints API</title>
</head>
<body>
  <h2>Submit Complaint</h2>
  <form id="f">
    <input name="serial" placeholder="serial" required><br><br>
    <input name="problem" placeholder="problem" required><br><br>
    <input name="unit" placeholder="unit" required><br><br>
    <input name="department" placeholder="department" required><br><br>
    <input name="name" placeholder="name" required><br><br>
    <input name="phone" placeholder="phone" required><br><br>
    <button type="submit">Submit</button>
  </form>

  <h3>Response</h3>
  <pre id="out"></pre>

  <h3>View All Complaints</h3>
  <button id="load">Load Complaints</button>
  <pre id="list"></pre>

  <script>
    // Handle form submission
    document.getElementById('f').addEventListener('submit', async function(e){
      e.preventDefault();
      const form = new FormData(e.target);
      const resp = await fetch('api.php', { method: 'POST', body: form });
      const text = await resp.text();
      document.getElementById('out').textContent = text;
    });

    // Load all complaints (GET)
    document.getElementById('load').addEventListener('click', async function(){
      const resp = await fetch('api.php');
      const text = await resp.text();
      document.getElementById('list').textContent = text;
    });
  </script>
</body>
</html>
